#### Автор - [Тарба Александр](https://vk.com/korotkoeimya1112)
#### Задание - [Методические указания](https://github.com/init/highload/blob/main/homework_architecture.md)

#### Содержание:
1. [Тема, функционал и аудитория](#1)
2. [Расчёт нагрузки](#2)


## Часть 1. Тема, функционал и аудитория <a name="1"></a>

### Тема курсовой работы - **"Проектирование высоконагруженнного сервиса голосового помощника"**
В качестве примера выбран [Google Ассистент](assistant.google.com)

### Ключевой функционал сервиса
- Регистрация и авторизация пользователей
- Создание напоминаний и уведомлений
- Поиск информации

### Ключевые продуктовые решения
- Поддержка нескольких языков
- Хранение пользовательских событий на сервере
- Синхронизация пользователя на нескольких устройствах 
- Голосовой ввод запросов и озвучивание ответа 

### Целевая аудитория
- более 500 миллионов активных пользователей по всему миру [^1]

## Часть 2. Расчёт нагрузки <a name="2"></a>

### Продуктовые метрики
По статистике, приведенной в [^2], около 46% активных пользователей используют голосовой помощник ежедневно, таким образом можно оценить среднее число пользователей в день.

Пользователи выполняют $3.1$ миллиарда запросов в месяц [^2], из которых примерно $36%$ приходится на Google Assistant [^2], т.е. в месяц выполняется около $$3.1 * 0.36 / 30 = 37.2 млн$$ запросов в день.

Средняя длина ответа в Google Ассистенте согласно [^3] составляет 43 слова, а средняя длина вопроса составляет 29 слов [^4], таким образом для хранения ответа и вопроса необходимо $(43+29)=72 байт$, умножая на число запросов в день, получаем необходимый размер памяти для хранения текстов вопросов и ответов, т.е. $$72 * 37.2 млн = 2.5 Гб.$$ 

- MAU - $500 млн$ пользователей [^1]
- DAU - $230 млн$ пользователей [^2]
- Число запросов в день - $37.2 млн$
- Средний размер хранилища для хранения истории запросов в день - $2.5 Гб$


### Технические метрики
RPS по запросам рассчитывается следующим образом: $$37.2 * 10^6 / 24 / 60 / 60 = 430 запросов/c$$
Положим, что пиковый RPS составляет $3/2$ от среднего, тогда пиковый RPS: $$430 * 3 / 2 = 645 запросов/c$$
Объем памяти, необходимой для хранения истории запросов/ответов в год: $$2.5 Гб * 365 = 912 Гб$$
Положим, что пиковый траффик составляет $3/2$ от исходного, тогда пиковый траффик: $$(3/2 * 645) * 72 * 8 / 10^9 = 0.00055728 Гбит/c$$
Суммарный суточный траффик, можно вычислить следующим образом: $$(37.2 * 10^6) * 72 / 1024 / 1024 / 1024 = 2.5 Гб/сутки$$

| Метрика                             | Значение        |
| ----------------------------------- | --------------- | 
| RPS                  | 430 запросов/c     |
| Пиковый RPS                | 645 запросов/c           |
| Память                  | 912 Гб          |
| Траффик|0.00055728 Гбит/c|
|Суточный траффик|2.5 Гб/сутки|

  

### Список источников
[^1]: [Статистика Google Assistant](https://tech.hindustantimes.com/tech/news/ces-2020-google-assistant-hits-500-million-users-new-set-of-features-announced-story-oKAGV1xsMrrAYPPigMEGxK-4.html)
[^2]: [Статистика голосовых помощников](https://serpwatch.io/blog/voice-search-statistics/)
[^3]: [Статистика по длине ответа на запросы](https://searchengines.guru/ru/articles/2048581)
[^4]: [Статистика по длине запроса](https://pr-cy.ru/news/p/6995-golosovoy-poisk-sovety-po-optimizatsii-kontenta-i-issledovanie)